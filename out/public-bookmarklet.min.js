/** @license
 * Kifu for JS
 * Copyright (c) 2014 na2hiro (https://github.com/na2hiro)
 * This software is released under the MIT License.
 * http://opensource.org/licenses/mit-license.php
 */
var KifuForJS;!function(){function t(){try{var t=KifuForJS=require("Kifu");t.settings.ImageDirectoryPath="https://na2hiro.github.io/Kifu-for-JS/images";var i=[];if($("applet param[name=KIFU]").each(function(t){var a=$(this).parent(),o=a.attr("codebase")||".",r="kifuforjs_"+e(),n=o.replace(/\/$/,"")+"/"+$(this).val();a.replaceWith("<div id='"+r+"'></div>"),i.push({targetId:r,kifuPath:n,method:"applet"})}),$("object param[name=FlashVars]").each(function(t){var a,o=$(this).parent();if($(this).val().split("&").map(function(t){var e=t.split("=");"kifu"==e[0]&&(a=e[1])}),a){var r="kifuforjs_"+e();o.replaceWith("<div id='"+r+"'></div>"),i.push({kifuPath:a,targetId:r,method:"object"})}}),"undefined"!=typeof so&&so.variables&&so.variables.kifu&&$("#flashcontent").length>0)$("#flashcontent").replaceWith("<div id='flashcontent'></div>"),i.push({targetId:"flashcontent",kifuPath:so.variables.kifu,method:"swo_flashcontent"});else if("undefined"!=typeof params&&params.FlashVars&&$("#so").length>0){var a;params.FlashVars.split("&").forEach(function(t){var e=t.split("=");"kifu"==e[0]&&(a=e[1])}),a&&($("#so").replaceWith("<div id='so'></div>"),$("#so").css("visibility","visible"),i.push({targetId:"so",kifuPath:a,method:"swo_so"}))}else $("script").filter(function(t,e){return e.textContent.indexOf("SWFObject")>=0}).each(function(t,e){var a=e.textContent.match(/addVariable.+kifu.+"(.+)"/),o=e.textContent.match(/write.+"(.+)"/);a&&o&&i.push({kifuPath:a[1],targetId:o[1],method:"swo_bruteforce"})});if(window.getSelection&&""!=getSelection().toString()){var o=getSelection(),r=e();$("<div id='"+r+"'>").insertAfter($(o.focusNode));try{t.loadString(o.toString(),r)}catch(n){console.log(n)}}else if(0==i.length)throw"将棋盤が見つかりませんでした";console.log("load start",i),i.forEach(function(e){try{t.load(e.kifuPath.replace(/\.(z|gz)$/gi,""),e.targetId)}catch(i){console.log("error",i)}})}catch(n){console.log(n),alert("読込失敗: "+n)}}function e(){return Math.random().toString(36).slice(2)}var i=0;if("undefined"==typeof $||!$.fn||!$.fn.jquery){i++;var a=document.createElement("script");a.src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js",a.charset="utf-8",a.onload=function(){console.log("jq loaded"),$=jQuery,0==--i&&t()},document.body.appendChild(a)}if(!KifuForJS){i++;var a=document.createElement("script");a.src="https://na2hiro.github.io/Kifu-for-JS/out/kifuforjs.js",a.charset="utf-8",a.onload=function(){console.log("Kifu for JS loaded"),0==--i&&t()},document.body.appendChild(a)}var o=document.createElement("link");o.type="text/css",o.href="https://na2hiro.github.io/Kifu-for-JS/css/kifuforjs.css",o.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(o),0==i&&t()}();