/** @license
 * Kifu for JS
 * Copyright (c) 2014 na2hiro (https://github.com/na2hiro)
 * This software is released under the MIT License.
 * http://opensource.org/licenses/mit-license.php
 */
!function(){function e(){try{var e=require("Kifu");e.settings.ImageDirectoryPath="https://na2hiro.github.io/Kifu-for-JS/images";var a,t;if($("applet param[name=KIFU]").length>0){var i=$("applet param[name=KIFU]").parent().attr("codebase")||".";t=i.replace(/\/$/,"")+"/"+$("applet param[name=KIFU]").val(),console.log(t),$("applet param[name=KIFU]").parent().replaceWith("<div id='kifuforjs'></div>"),a="kifuforjs"}else $("#flashcontent").length>0?"undefined"!=typeof so&&so.variables&&so.variables.kifu&&($("#flashcontent").replaceWith("<div id='flashcontent'></div>"),a="flashcontent",t=so.variables.kifu):$("object param[name=FlashVars]").val()&&($("object param[name=FlashVars]").val().split("&&").map(function(e){var a=e.split("=");"kifu"==a[0]&&(t=a[1])}),$("#Kifu").length>0?$("#Kifu").replaceWith("<div id='Kifu'></div>"):$("object param[name=FlashVars]").parent().replaceWith("<div id='Kifu'></div>"),a="Kifu");if(!a&&"undefined"!=typeof params&&params.FlashVars&&(params.FlashVars.split("&").forEach(function(e){var a=e.split("=");"kifu"==a[0]&&(t=a[1])}),0==$("#so").length?$(document.body).prepend("<div id='so'></div>"):$("#so").replaceWith("<div id='so'></div>"),$("#so").css("visibility","visible"),a="so"),a||$("script").filter(function(e,a){return a.textContent.indexOf("SWFObject")>=0}).each(function(e,i){var o=i.textContent.match(/addVariable.+kifu.+"(.+)"/),r=i.textContent.match(/write.+"(.+)"/);o&&r&&(t=o[1],a=r[1])}),!a)throw"棋譜が見つかりませんでした";console.log("load start");try{e.load(t.replace(/\.(z|gz)$/gi,""),a)}catch(o){throw"棋譜解析エラー"+o}}catch(o){console.log(o),alert("読込失敗: "+o)}}var a=0;if("undefined"==typeof $||!$.fn||!$.fn.jquery){a++;var t=document.createElement("script");t.src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js",t.charset="utf-8",t.onload=function(){console.log("jq loaded"),$=jQuery,0==--a&&e()},document.body.appendChild(t)}a++;var t=document.createElement("script");t.src="https://na2hiro.github.io/Kifu-for-JS/out/kifuforjs.js",t.charset="utf-8",t.onload=function(){console.log("Kifu for JS loaded"),0==--a&&e()},document.body.appendChild(t);var i=document.createElement("link");i.type="text/css",i.href="https://na2hiro.github.io/Kifu-for-JS/css/kifuforjs.css",i.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(i)}();