/** @license
 * Kifu for JS
 * Copyright (c) 2014 na2hiro (https://github.com/na2hiro)
 * This software is released under the MIT License.
 * http://opensource.org/licenses/mit-license.php
 */
!function(){function t(){try{var t=require("Kifu");t.settings.ImageDirectoryPath="https://na2hiro.github.io/Kifu-for-JS/images";var a=[];if($("applet param[name=KIFU]").each(function(t){var i=$(this).parent(),o=i.attr("codebase")||".",r="kifuforjs_"+e(),s=o.replace(/\/$/,"")+"/"+$(this).val();i.replaceWith("<div id='"+r+"'></div>"),a.push({targetId:r,kifuPath:s,method:"applet"})}),$("object param[name=FlashVars]").each(function(t){var i,o=$(this).parent();if($(this).val().split("&").map(function(t){var e=t.split("=");"kifu"==e[0]&&(i=e[1])}),i){var r="kifuforjs_"+e();o.replaceWith("<div id='"+r+"'></div>"),a.push({kifuPath:i,targetId:r,method:"object"})}}),"undefined"!=typeof so&&so.variables&&so.variables.kifu&&$("#flashcontent").length>0)$("#flashcontent").replaceWith("<div id='flashcontent'></div>"),a.push({targetId:"flashcontent",kifuPath:so.variables.kifu,method:"swo_flashcontent"});else if("undefined"!=typeof params&&params.FlashVars&&$("#so").length>0){var i;params.FlashVars.split("&").forEach(function(t){var e=t.split("=");"kifu"==e[0]&&(i=e[1])}),i&&($("#so").replaceWith("<div id='so'></div>"),$("#so").css("visibility","visible"),a.push({targetId:"so",kifuPath:i,method:"swo_so"}))}else $("script").filter(function(t,e){return e.textContent.indexOf("SWFObject")>=0}).each(function(t,e){var i=e.textContent.match(/addVariable.+kifu.+"(.+)"/),o=e.textContent.match(/write.+"(.+)"/);i&&o&&a.push({kifuPath:i[1],targetId:o[1],method:"swo_bruteforce"})});if(0==a.length)throw"将棋盤が見つかりませんでした";console.log("load start",a),a.forEach(function(e){try{t.load(e.kifuPath.replace(/\.(z|gz)$/gi,""),e.targetId)}catch(a){console.log("error",a)}})}catch(o){console.log(o),alert("読込失敗: "+o)}}function e(){return Math.random().toString(36).slice(2)}var a=0;if("undefined"==typeof $||!$.fn||!$.fn.jquery){a++;var i=document.createElement("script");i.src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js",i.charset="utf-8",i.onload=function(){console.log("jq loaded"),$=jQuery,0==--a&&t()},document.body.appendChild(i)}a++;var i=document.createElement("script");i.src="https://na2hiro.github.io/Kifu-for-JS/out/kifuforjs.js",i.charset="utf-8",i.onload=function(){console.log("Kifu for JS loaded"),0==--a&&t()},document.body.appendChild(i);var o=document.createElement("link");o.type="text/css",o.href="https://na2hiro.github.io/Kifu-for-JS/css/kifuforjs.css",o.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(o)}();