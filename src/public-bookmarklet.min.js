!function(){!function(){function e(){try{Kifu.settings.ImageDirectoryPath="https://na2hiro.github.io/Kifu-for-JS/images";var e,a;if($("applet param[name=KIFU]").length>0?(a=$("applet param[name=KIFU]").val(),$("applet param[name=KIFU]").parent().replaceWith("<div id='kifuforjs'></div>"),e="kifuforjs"):$("#flashcontent").length>0?($("#flashcontent").replaceWith("<div id='flashcontent'></div>"),e="flashcontent",a=so.variables.kifu):$("object param[name=FlashVars]").val()&&($("object param[name=FlashVars]").val().split("&&").map(function(e){var t=e.split("=");"kifu"==t[0]&&(a=t[1])}),$("#Kifu").length>0?$("#Kifu").replaceWith("<div id='Kifu'></div>"):$("object param[name=FlashVars]").parent().replaceWith("<div id='Kifu'></div>"),e="Kifu"),!e&&"undefined"!=typeof params&&params.FlashVars&&(params.FlashVars.split("&").forEach(function(e){var t=e.split("=");"kifu"==t[0]&&(a=t[1])}),0==$("#so").length?$(document.body).prepend("<div id='so'></div>"):$("#so").replaceWith("<div id='so'></div>"),$("#so").css("visibility","visible"),e="so"),!e)throw"棋譜が見つかりませんでした";console.log("load start");try{Kifu.load(a.replace(/\.(z|gz)$/gi,""),e)}catch(t){throw"棋譜解析エラー"+t}}catch(t){console.log(t),alert("読込失敗: "+t)}}var a=0;if("undefined"==typeof $||!$.fn||!$.fn.jquery){a++;var t=document.createElement("script");t.src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js",t.charset="utf-8",t.onload=function(){console.log("jq loaded"),$=jQuery,0==--a&&e()},document.body.appendChild(t)}a++;var t=document.createElement("script");t.src="https://na2hiro.github.io/Kifu-for-JS/src/kifuforjs.js",t.charset="utf-8",t.onload=function(){console.log("Kifu for JS loaded"),0==--a&&e()},document.body.appendChild(t);var i=document.createElement("link");i.type="text/css",i.href="https://na2hiro.github.io/Kifu-for-JS/css/kifuforjs.css",i.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(i)}()}();